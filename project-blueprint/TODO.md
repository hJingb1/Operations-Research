# è¿ç­¹å­¦é¡¹ç›®ç®¡ç†æ¨¡æ‹Ÿå™¨ - å¼€å‘å¾…åŠäº‹é¡¹ (ä¸¤é˜¶æ®µç‰ˆ)

> **é¡¹ç›®çŠ¶æ€**: é˜¶æ®µ2å·²å®Œæˆï¼Œå¾…å®ç°é˜¶æ®µ1æ ¸å¿ƒåŠŸèƒ½
> **æœ€åæ›´æ–°**: 2025-10-07
> **æ ¸å¿ƒå˜æ›´**: é¡¹ç›®é‡‡ç”¨ä¸¤é˜¶æ®µç‹¬ç«‹è®­ç»ƒæ¨¡å¼

---

## ğŸ¯ é¡¹ç›®æ¶æ„æ¦‚è¿°

### ä¸¤é˜¶æ®µæ•™å­¦æ¨¡å¼

| é˜¶æ®µ | è®­ç»ƒç›®æ ‡ | é¡¹ç›®å†…å®¹ | å­¦ç”Ÿä»»åŠ¡ | è¯„åˆ† |
|------|---------|---------|---------|------|
| **é˜¶æ®µ1** | æ‰‹åŠ¨æ’ç¨‹èƒ½åŠ› | é¡¹ç›®A (15ä»»åŠ¡) | ä»åœè½¦åœºæ‹–æ‹½ä»»åŠ¡åˆ°ç”˜ç‰¹å›¾ï¼Œæ»¡è¶³ä¾èµ–/èµ„æº/å·¥æœŸçº¦æŸ | é€šè¿‡=60åˆ† (å›ºå®š) |
| **é˜¶æ®µ2** | æˆæœ¬ä¼˜åŒ–èƒ½åŠ› | é¡¹ç›®B (10ä»»åŠ¡) | å‹ç¼©å·¥åºä¼˜åŒ–æ—¶é—´-æˆæœ¬å¹³è¡¡ï¼Œä¸‰èµ›é“æ’è¡Œæ¦œ | 40-100åˆ† (ç«äº‰) |

**å…³é”®è®¾è®¡**:
- âœ… ä¸¤ä¸ªé˜¶æ®µä½¿ç”¨**å®Œå…¨ç‹¬ç«‹**çš„é¡¹ç›®æ•°æ®ï¼ˆä»»åŠ¡æ•°é‡ã€ä¾èµ–å…³ç³»ã€èµ„æºéœ€æ±‚å‡ä¸åŒï¼‰
- âœ… å¿…é¡»é€šè¿‡é˜¶æ®µ1æ‰èƒ½è¿›å…¥é˜¶æ®µ2ï¼ˆåç«¯å­˜å‚¨é€šè¿‡çŠ¶æ€ï¼‰
- âœ… é€šè¿‡é˜¶æ®µ1åï¼Œå†æ¬¡ç™»å½•ç›´æ¥è¿›å…¥é˜¶æ®µ2ï¼ˆä¸å¯å›é€€ï¼‰
- âœ… é˜¶æ®µ1ä¸æ˜¾ç¤ºCPMæ•°æ®ï¼ˆå…³é”®è·¯å¾„ã€ES/LSç­‰ï¼‰
- âœ… é˜¶æ®µ2å»¶ç”¨ç°æœ‰å®Œæ•´åŠŸèƒ½ï¼ˆDashboardã€æ’è¡Œæ¦œã€æˆæœ¬ä¼˜åŒ–ï¼‰

---

## ğŸ“Š æ•´ä½“è¿›åº¦æ¦‚è§ˆ

### ç°æœ‰åŠŸèƒ½ (é˜¶æ®µ2å·²å®Œæˆ)
| æ¨¡å— | å®Œæˆåº¦ | çŠ¶æ€ |
|------|--------|------|
| CPMè®¡ç®—å¼•æ“ | âœ… 100% | å®Œæˆ |
| ç”¨æˆ·è®¤è¯ç³»ç»Ÿ | âœ… 100% | å®Œæˆ |
| æˆæœ¬è®¡ç®—æ¨¡å‹ | âœ… 100% | å®Œæˆ |
| Dashboardä»ªè¡¨ç›˜ | âœ… 100% | å®Œæˆ |
| ä»»åŠ¡å‹ç¼©åŠŸèƒ½ | âœ… 100% | å®Œæˆ |
| æ’¤é”€/é‡åšåŠŸèƒ½ | âœ… 100% | å®Œæˆ |
| æ’è¡Œæ¦œåç«¯API | âœ… 100% | å®Œæˆ |
| åŸºç¡€ç”˜ç‰¹å›¾(åªè¯») | âœ… 100% | å®Œæˆ |

### å¾…å®ç°åŠŸèƒ½ (é˜¶æ®µ1æ ¸å¿ƒ)
| æ¨¡å— | å®Œæˆåº¦ | ä¼˜å…ˆçº§ | é¢„ä¼°å·¥æ—¶ |
|------|--------|--------|----------|
| **é˜¶æ®µ1æ•°æ®å±‚** | âŒ 0% | ğŸ”¥P0 | 0.5å¤© |
| **åœè½¦åœº+æ‹–æ‹½** | âŒ 0% | ğŸ”¥P0 | 2å¤© |
| **éªŒè¯å™¨å¼•æ“** | âŒ 0% | ğŸ”¥P0 | 1å¤© |
| **èµ„æºå¯è§†åŒ–** | âŒ 0% | ğŸ”¥P0 | 1å¤© |
| **é˜¶æ®µåˆ‡æ¢é€»è¾‘** | âŒ 0% | ğŸ”¥P0 | 1å¤© |
| **åç«¯APIæ‰©å±•** | âŒ 0% | ğŸ”¥P0 | 1å¤© |
| **é›†æˆæµ‹è¯•** | âŒ 0% | ğŸŸ P1 | 1å¤© |
| ç½‘ç»œå›¾è§†å›¾ | âŒ 0% | ğŸŸ¢P2 | 2-3å¤© |

**æ€»é¢„ä¼°å·¥æ—¶**: 7.5-10å¤© (P0+P1ä»»åŠ¡)

---

## ğŸ”¥ P0çº§ä»»åŠ¡ (æ ¸å¿ƒåŠŸèƒ½ - å¿…é¡»å®Œæˆ)

---

### ä»»åŠ¡1: æ•°æ®å±‚å‡†å¤‡ä¸é…ç½®
**é¢„ä¼°å·¥æ—¶**: 0.5å¤©
**ä¾èµ–**: æ— 

#### 1.1 åˆ›å»ºé˜¶æ®µ1é¡¹ç›®æ•°æ®
- [ ] **æ–°å»ºæ–‡ä»¶**: `fronted/public/phase1-project.json`
  ```json
  {
    "projectName": "åŠå…¬æ¥¼å»ºè®¾é¡¹ç›®",
    "description": "é˜¶æ®µ1: æ‰‹åŠ¨æ’ç¨‹è®­ç»ƒ",
    "resourcePool": {
      "worker": 80,
      "crane": 3,
      "excavator": 5
    },
    "tasks": [
      {
        "id": "A",
        "name": "åœ°åŸºå‡†å¤‡",
        "duration": 5,
        "predecessors": [],
        "resources": { "worker": 20, "excavator": 2 }
      },
      {
        "id": "B",
        "name": "åŸºç¡€æµ‡ç­‘",
        "duration": 8,
        "predecessors": ["A"],
        "resources": { "worker": 30, "crane": 1 }
      }
      // ... è®¾è®¡å…±15ä¸ªä»»åŠ¡
      // è¦æ±‚:
      // - ä¾èµ–å…³ç³»å½¢æˆå¤æ‚ç½‘ç»œ(éç®€å•ä¸²è¡Œ)
      // - èµ„æºåˆ†é…ç¡®ä¿å¿…é¡»åˆç†å¹¶è¡Œæ‰èƒ½é€šè¿‡
      // - çº¯ä¸²è¡Œå·¥æœŸ > é˜ˆå€¼, åˆç†å¹¶è¡Œå·¥æœŸ < é˜ˆå€¼
    ]
  }
  ```

- [ ] **æ–°å»ºæ–‡ä»¶**: `fronted/public/phase1-config.json`
  ```json
  {
    "maxDuration": 150,
    "passScore": 60,
    "validationMessages": {
      "pass": "âœ“ é˜¶æ®µ1é€šè¿‡ï¼æ‚¨å·²æŒæ¡åŸºç¡€æ’ç¨‹æŠ€èƒ½ï¼Œå¯ä»¥è¿›å…¥æˆæœ¬ä¼˜åŒ–é˜¶æ®µã€‚",
      "failDuration": "å·¥æœŸè¶…é™ï¼šå½“å‰{current}å¤©ï¼Œè¦æ±‚â‰¤{max}å¤©",
      "failDependencies": "å­˜åœ¨{count}ä¸ªå‰ç½®ä¾èµ–è¿è§„",
      "failResources": "å­˜åœ¨{count}ä¸ªèµ„æºå†²çªæ—¶æ®µ",
      "failNotAllPlaced": "è¿˜æœ‰{count}ä¸ªä»»åŠ¡æœªæ”¾ç½®"
    }
  }
  ```

- [ ] **é‡å‘½åæ–‡ä»¶**: `initial-project.json` â†’ `phase2-project.json`

- [ ] **ç¤ºä¾‹èµ„æºæ•°æ®è®¾è®¡** (ä¸´æ—¶ä½¿ç”¨ï¼Œåç»­æ›¿æ¢)
  - è®¾è®¡åŸåˆ™:
    - å…³é”®è·¯å¾„ä¸Šçš„ä»»åŠ¡èµ„æºéœ€æ±‚è¾ƒé«˜
    - å¯å¹¶è¡Œä»»åŠ¡çš„èµ„æºéœ€æ±‚æ€»å’Œ > èµ„æºæ±  (åˆ¶é€ å†²çª)
    - ç•™æœ‰ä¸€å®šä¼˜åŒ–ç©ºé—´ (ä¸æ˜¯å”¯ä¸€è§£)

#### 1.2 éªŒè¯æ•°æ®å®Œæ•´æ€§
- [ ] æ£€æŸ¥ä¾èµ–å…³ç³»æ— ç¯
- [ ] æ£€æŸ¥æ‰€æœ‰å‰ç½®ä»»åŠ¡IDå­˜åœ¨
- [ ] æ‰‹åŠ¨æ¨¡æ‹Ÿæ’ç¨‹éªŒè¯é˜ˆå€¼åˆç†æ€§

---

### ä»»åŠ¡2: ReduxçŠ¶æ€ç®¡ç†é‡æ„
**é¢„ä¼°å·¥æ—¶**: 0.5å¤©
**ä¾èµ–**: ä»»åŠ¡1å®Œæˆ

#### 2.1 åˆ›å»ºé˜¶æ®µç®¡ç†Slice
- [ ] **æ–°å»ºæ–‡ä»¶**: `fronted/src/store/gameSlice.js`
  ```javascript
  import { createSlice } from '@reduxjs/toolkit';

  const gameSlice = createSlice({
    name: 'game',
    initialState: {
      currentPhase: 1, // ä»JWT tokenæˆ–localStorageè¯»å–
      phase1Passed: false,
      phase1Score: 0
    },
    reducers: {
      setCurrentPhase: (state, action) => {
        state.currentPhase = action.payload;
      },
      setPhase1Result: (state, action) => {
        state.phase1Passed = true;
        state.phase1Score = action.payload.score;
        state.currentPhase = 2;
      },
      initializeFromAuth: (state, action) => {
        // ä»JWT tokenä¸­è¯»å–currentPhase
        state.currentPhase = action.payload.currentPhase;
      }
    }
  });

  export const { setCurrentPhase, setPhase1Result, initializeFromAuth } = gameSlice.actions;
  export default gameSlice.reducer;
  ```

#### 2.2 åˆ›å»ºé˜¶æ®µ1çŠ¶æ€Slice
- [ ] **æ–°å»ºæ–‡ä»¶**: `fronted/src/store/phase1Slice.js`
  ```javascript
  import { createSlice } from '@reduxjs/toolkit';

  const initialState = {
    projectName: '',
    resourcePool: {},
    tasks: [],
    unplacedTaskIds: [], // ["A", "B", "C", ...]
    config: {},
    validationErrors: {
      duration: { current: 0, max: 0, isValid: true },
      dependencies: [], // [{ taskId, predId, message }]
      resources: [], // [{ day, resourceType, required, available }]
      unplaced: []
    },
    isSubmitting: false,
    isPassed: false
  };

  const phase1Slice = createSlice({
    name: 'phase1',
    initialState,
    reducers: {
      loadPhase1Data: (state, action) => {
        const { projectData, config } = action.payload;
        state.projectName = projectData.projectName;
        state.resourcePool = projectData.resourcePool;
        state.config = config;

        // åˆå§‹åŒ–ä»»åŠ¡ï¼šå…¨éƒ¨æ”¾åœ¨Day 0ï¼Œæ ‡è®°ä¸ºæœªæ”¾ç½®
        state.tasks = projectData.tasks.map(t => ({
          ...t,
          startDay: 0,
          isPlaced: false
        }));
        state.unplacedTaskIds = projectData.tasks.map(t => t.id);
      },

      placeTask: (state, action) => {
        const { taskId, startDay } = action.payload;
        const task = state.tasks.find(t => t.id === taskId);
        if (task) {
          task.startDay = startDay;
          task.isPlaced = true;
          state.unplacedTaskIds = state.unplacedTaskIds.filter(id => id !== taskId);
        }
      },

      moveTask: (state, action) => {
        const { taskId, newStartDay } = action.payload;
        const task = state.tasks.find(t => t.id === taskId);
        if (task) {
          task.startDay = newStartDay;
        }
      },

      setValidationErrors: (state, action) => {
        state.validationErrors = action.payload;
      },

      markPassed: (state) => {
        state.isPassed = true;
      },

      resetPhase1: (state) => {
        return { ...initialState };
      }
    }
  });

  export const {
    loadPhase1Data,
    placeTask,
    moveTask,
    setValidationErrors,
    markPassed,
    resetPhase1
  } = phase1Slice.actions;

  export default phase1Slice.reducer;
  ```

#### 2.3 é›†æˆåˆ°Store
- [ ] **ä¿®æ”¹æ–‡ä»¶**: `fronted/src/store/store.js`
  ```javascript
  import { configureStore } from '@reduxjs/toolkit';
  import authReducer from './authSlice';
  import gameReducer from './gameSlice';
  import phase1Reducer from './phase1Slice';
  import projectReducer from './projectSlice'; // ç”¨äºé˜¶æ®µ2

  export const store = configureStore({
    reducer: {
      auth: authReducer,
      game: gameReducer,
      phase1: phase1Reducer,
      project: projectReducer // ä¿æŒç°æœ‰ç»“æ„(å«redux-undo)
    }
  });
  ```

---

### ä»»åŠ¡3: éªŒè¯å™¨å¼•æ“å¼€å‘
**é¢„ä¼°å·¥æ—¶**: 1å¤©
**ä¾èµ–**: ä»»åŠ¡2å®Œæˆ

#### 3.1 ä¾èµ–å…³ç³»éªŒè¯å™¨
- [ ] **æ–°å»ºæ–‡ä»¶**: `fronted/src/validators/dependencyValidator.js`
  ```javascript
  /**
   * éªŒè¯æ‰€æœ‰ä»»åŠ¡çš„å‰ç½®ä¾èµ–å…³ç³»
   * @param {Array} tasks - ä»»åŠ¡æ•°ç»„
   * @returns {Array} è¿è§„åˆ—è¡¨
   */
  export function validateDependencies(tasks) {
    const errors = [];

    tasks.forEach(task => {
      if (!task.isPlaced) return; // æœªæ”¾ç½®çš„ä»»åŠ¡ä¸æ£€æŸ¥

      task.predecessors.forEach(predId => {
        const pred = tasks.find(t => t.id === predId);

        if (!pred) {
          errors.push({
            taskId: task.id,
            taskName: task.name,
            predId,
            message: `å‰ç½®ä»»åŠ¡${predId}ä¸å­˜åœ¨`
          });
          return;
        }

        if (!pred.isPlaced) {
          errors.push({
            taskId: task.id,
            taskName: task.name,
            predId,
            predName: pred.name,
            message: `å‰ç½®ä»»åŠ¡${pred.name}å°šæœªæ”¾ç½®`
          });
          return;
        }

        const predEndDay = pred.startDay + pred.duration;
        if (predEndDay > task.startDay) {
          errors.push({
            taskId: task.id,
            taskName: task.name,
            taskStartDay: task.startDay,
            predId,
            predName: pred.name,
            predEndDay,
            message: `${task.name}(ç¬¬${task.startDay}å¤©å¼€å§‹)æ—©äºå‰ç½®ä»»åŠ¡${pred.name}(ç¬¬${predEndDay}å¤©å®Œæˆ)`
          });
        }
      });
    });

    return errors;
  }
  ```

#### 3.2 èµ„æºå†²çªéªŒè¯å™¨
- [ ] **æ–°å»ºæ–‡ä»¶**: `fronted/src/validators/resourceValidator.js`
  ```javascript
  /**
   * æ£€æµ‹èµ„æºè¶…é™æ—¶æ®µ
   * @param {Array} tasks - ä»»åŠ¡æ•°ç»„
   * @param {Object} resourcePool - èµ„æºæ±  {worker: 80, crane: 3}
   * @returns {Array} å†²çªåˆ—è¡¨
   */
  export function detectResourceConflicts(tasks, resourcePool) {
    const placedTasks = tasks.filter(t => t.isPlaced);
    if (placedTasks.length === 0) return [];

    // è®¡ç®—é¡¹ç›®æ—¶é—´èŒƒå›´
    const maxDay = Math.max(
      ...placedTasks.map(t => t.startDay + t.duration)
    );

    // æŒ‰å¤©ç´¯åŠ èµ„æºéœ€æ±‚
    const timeline = {};
    for (let day = 0; day <= maxDay; day++) {
      timeline[day] = {};
    }

    placedTasks.forEach(task => {
      for (let day = task.startDay; day < task.startDay + task.duration; day++) {
        if (task.resources) {
          Object.entries(task.resources).forEach(([type, amount]) => {
            timeline[day][type] = (timeline[day][type] || 0) + amount;
          });
        }
      }
    });

    // æ£€æµ‹è¶…é™
    const conflicts = [];
    Object.entries(timeline).forEach(([day, usage]) => {
      Object.entries(usage).forEach(([resourceType, required]) => {
        const available = resourcePool[resourceType] || 0;
        if (required > available) {
          conflicts.push({
            day: parseInt(day),
            resourceType,
            required,
            available,
            exceed: required - available,
            message: `ç¬¬${day}å¤©${resourceType}éœ€æ±‚${required} > å¯ç”¨${available}`
          });
        }
      });
    });

    return conflicts;
  }

  /**
   * ç”Ÿæˆèµ„æºä½¿ç”¨æ—¶é—´è½´æ•°æ®(ç”¨äºå›¾è¡¨ç»˜åˆ¶)
   */
  export function generateResourceTimeline(tasks, resourcePool) {
    const placedTasks = tasks.filter(t => t.isPlaced);
    if (placedTasks.length === 0) return { days: [], data: {} };

    const maxDay = Math.max(...placedTasks.map(t => t.startDay + t.duration));
    const days = Array.from({ length: maxDay + 1 }, (_, i) => i);
    const data = {};

    // åˆå§‹åŒ–æ¯ç§èµ„æºçš„æ•°ç»„
    Object.keys(resourcePool).forEach(type => {
      data[type] = new Array(maxDay + 1).fill(0);
    });

    placedTasks.forEach(task => {
      for (let day = task.startDay; day < task.startDay + task.duration; day++) {
        if (task.resources) {
          Object.entries(task.resources).forEach(([type, amount]) => {
            if (data[type]) {
              data[type][day] += amount;
            }
          });
        }
      }
    });

    return { days, data, pool: resourcePool };
  }
  ```

#### 3.3 ç»¼åˆéªŒè¯å‡½æ•°
- [ ] **æ–°å»ºæ–‡ä»¶**: `fronted/src/validators/phase1Validator.js`
  ```javascript
  import { validateDependencies } from './dependencyValidator';
  import { detectResourceConflicts } from './resourceValidator';

  /**
   * é˜¶æ®µ1å®Œæ•´éªŒè¯
   * @returns {Object} { isValid: boolean, errors: {...} }
   */
  export function validatePhase1Submission(tasks, resourcePool, config) {
    const errors = {
      duration: { current: 0, max: config.maxDuration, isValid: true },
      dependencies: [],
      resources: [],
      unplaced: []
    };

    // 1. æ£€æŸ¥æ˜¯å¦æ‰€æœ‰ä»»åŠ¡å·²æ”¾ç½®
    const unplacedTasks = tasks.filter(t => !t.isPlaced);
    if (unplacedTasks.length > 0) {
      errors.unplaced = unplacedTasks.map(t => ({
        taskId: t.id,
        taskName: t.name
      }));
    }

    // 2. è®¡ç®—æ€»å·¥æœŸ
    const placedTasks = tasks.filter(t => t.isPlaced);
    if (placedTasks.length > 0) {
      const totalDuration = Math.max(
        ...placedTasks.map(t => t.startDay + t.duration)
      );
      errors.duration.current = totalDuration;
      errors.duration.isValid = totalDuration <= config.maxDuration;
    }

    // 3. éªŒè¯ä¾èµ–å…³ç³»
    errors.dependencies = validateDependencies(tasks);

    // 4. éªŒè¯èµ„æºå†²çª
    errors.resources = detectResourceConflicts(tasks, resourcePool);

    // åˆ¤æ–­æ•´ä½“æ˜¯å¦é€šè¿‡
    const isValid =
      errors.unplaced.length === 0 &&
      errors.duration.isValid &&
      errors.dependencies.length === 0 &&
      errors.resources.length === 0;

    return { isValid, errors };
  }
  ```

#### 3.4 å•å…ƒæµ‹è¯•
- [ ] ç¼–å†™æµ‹è¯•ç”¨ä¾‹éªŒè¯å„ç§åœºæ™¯
  - æ­£å¸¸é€šè¿‡
  - å·¥æœŸè¶…é™
  - ä¾èµ–è¿è§„
  - èµ„æºå†²çª
  - æ··åˆé”™è¯¯

---

### ä»»åŠ¡4: é˜¶æ®µ1 UIç»„ä»¶å¼€å‘
**é¢„ä¼°å·¥æ—¶**: 2å¤©
**ä¾èµ–**: ä»»åŠ¡2, ä»»åŠ¡3å®Œæˆ

#### 4.1 ç»„ä»¶ç›®å½•ç»“æ„
- [ ] **åˆ›å»ºç›®å½•**: `fronted/src/components/Phase1/`
  - `Phase1Container.jsx` - ä¸»å®¹å™¨
  - `ParkingLot.jsx` - åœè½¦åœº(ä»»åŠ¡å¡ç‰‡åˆ—è¡¨)
  - `Phase1Gantt.jsx` - å¯æ‹–æ‹½ç”˜ç‰¹å›¾
  - `Phase1TaskList.jsx` - ç®€åŒ–ä»»åŠ¡åˆ—è¡¨
  - `ResourceChart.jsx` - èµ„æºå ç”¨æ›²çº¿å›¾
  - `ValidationModal.jsx` - æäº¤éªŒè¯å¼¹çª—
  - `Phase1Header.jsx` - é¡¶éƒ¨å·¥å…·æ 

#### 4.2 ä¸»å®¹å™¨ç»„ä»¶
- [ ] **æ–°å»ºæ–‡ä»¶**: `Phase1Container.jsx`
  ```jsx
  import React, { useEffect } from 'react';
  import { useDispatch, useSelector } from 'react-redux';
  import { loadPhase1Data } from '../../store/phase1Slice';
  import Phase1Header from './Phase1Header';
  import ResourceChart from './ResourceChart';
  import Phase1Gantt from './Phase1Gantt';
  import Phase1TaskList from './Phase1TaskList';
  import './Phase1.css';

  function Phase1Container() {
    const dispatch = useDispatch();
    const { projectName, tasks } = useSelector(state => state.phase1);

    useEffect(() => {
      // åŠ è½½é˜¶æ®µ1æ•°æ®
      const loadData = async () => {
        const [projectRes, configRes] = await Promise.all([
          fetch('/phase1-project.json'),
          fetch('/phase1-config.json')
        ]);
        const projectData = await projectRes.json();
        const config = await configRes.json();

        dispatch(loadPhase1Data({ projectData, config }));
      };
      loadData();
    }, [dispatch]);

    if (tasks.length === 0) {
      return <div className="loading">æ­£åœ¨åŠ è½½é˜¶æ®µ1æ•°æ®...</div>;
    }

    return (
      <div className="phase1-container">
        <Phase1Header />
        <ResourceChart />
        <div className="phase1-main">
          <Phase1Gantt />
          <Phase1TaskList />
        </div>
      </div>
    );
  }

  export default Phase1Container;
  ```

#### 4.3 åœè½¦åœºç»„ä»¶(é›†æˆåˆ°ç”˜ç‰¹å›¾å†…)
- [ ] **Phase1Gantt.jsx** - æ ¸å¿ƒæ‹–æ‹½é€»è¾‘
  ```jsx
  import React, { useEffect, useRef } from 'react';
  import { useDispatch, useSelector } from 'react-redux';
  import { moveTask, placeTask } from '../../store/phase1Slice';
  import gantt from 'dhtmlx-gantt';
  import 'dhtmlx-gantt/codebase/dhtmlx-gantt.css';

  function Phase1Gantt() {
    const dispatch = useDispatch();
    const ganttContainer = useRef(null);
    const { tasks, validationErrors } = useSelector(state => state.phase1);

    useEffect(() => {
      // é…ç½®ganttä¸ºå¯ç¼–è¾‘æ¨¡å¼
      gantt.config.readonly = false;
      gantt.config.drag_move = true;
      gantt.config.drag_links = false; // ä¸å…è®¸ä¿®æ”¹ä¾èµ–å…³ç³»
      gantt.config.date_format = '%Y-%m-%d';
      gantt.config.scale_unit = 'day';
      gantt.config.step = 1;

      // è‡ªå®šä¹‰ä»»åŠ¡æ ·å¼
      gantt.templates.task_class = (start, end, task) => {
        let classes = [];

        // æœªæ”¾ç½®çš„ä»»åŠ¡(å †å åœ¨Day 0)
        if (!task.isPlaced) {
          classes.push('unplaced-task');
        }

        // è¿åä¾èµ–çš„ä»»åŠ¡
        const hasDependencyError = validationErrors.dependencies
          .some(err => err.taskId === task.id);
        if (hasDependencyError) {
          classes.push('dependency-error');
        }

        return classes.join(' ');
      };

      // æ‹–æ‹½ç»“æŸäº‹ä»¶
      gantt.attachEvent('onAfterTaskDrag', (id, mode, e) => {
        const task = gantt.getTask(id);
        const newStartDay = Math.round(
          (task.start_date - gantt.config.start_date) / (1000 * 60 * 60 * 24)
        );

        if (!task.isPlaced && newStartDay > 0) {
          // é¦–æ¬¡ä»åœè½¦åœºæ‹–å‡º
          dispatch(placeTask({ taskId: id, startDay: newStartDay }));
        } else {
          // è°ƒæ•´å·²æ”¾ç½®ä»»åŠ¡çš„ä½ç½®
          dispatch(moveTask({ taskId: id, newStartDay }));
        }
      });

      gantt.init(ganttContainer.current);

      return () => {
        gantt.clearAll();
      };
    }, []);

    useEffect(() => {
      // æ›´æ–°ç”˜ç‰¹å›¾æ•°æ®
      const baseDate = new Date(2025, 0, 1);

      const ganttData = {
        data: tasks.map(task => ({
          id: task.id,
          text: `${task.id}: ${task.name}`,
          start_date: new Date(baseDate.getTime() + task.startDay * 24 * 60 * 60 * 1000),
          duration: task.duration,
          progress: 0,
          isPlaced: task.isPlaced
        })),
        links: [] // é˜¶æ®µ1ä¸æ˜¾ç¤ºä¾èµ–è¿çº¿(é¿å…æç¤º)
      };

      gantt.clearAll();
      gantt.parse(ganttData);
    }, [tasks, validationErrors]);

    return (
      <div className="phase1-gantt-wrapper">
        <h3>é¡¹ç›®ç”˜ç‰¹å›¾ - æ‹–åŠ¨ä»»åŠ¡åˆ°åˆé€‚ä½ç½®</h3>
        <div
          ref={ganttContainer}
          style={{ width: '100%', height: '500px' }}
        />
      </div>
    );
  }

  export default Phase1Gantt;
  ```

#### 4.4 èµ„æºæ›²çº¿å›¾
- [ ] **ResourceChart.jsx**
  ```jsx
  import React, { useEffect, useRef } from 'react';
  import { useSelector } from 'react-redux';
  import { generateResourceTimeline } from '../../validators/resourceValidator';
  import Chart from 'chart.js/auto';

  function ResourceChart() {
    const chartRef = useRef(null);
    const chartInstance = useRef(null);
    const { tasks, resourcePool } = useSelector(state => state.phase1);

    useEffect(() => {
      if (!chartRef.current) return;

      const { days, data, pool } = generateResourceTimeline(tasks, resourcePool);

      // é”€æ¯æ—§å›¾è¡¨
      if (chartInstance.current) {
        chartInstance.current.destroy();
      }

      // åˆ›å»ºæ–°å›¾è¡¨
      const ctx = chartRef.current.getContext('2d');
      chartInstance.current = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: days,
          datasets: Object.entries(data).map(([type, values]) => ({
            label: type,
            data: values,
            backgroundColor: values.map((v, i) =>
              v > pool[type] ? 'rgba(255, 99, 99, 0.6)' : 'rgba(99, 132, 255, 0.6)'
            ),
            borderColor: values.map((v, i) =>
              v > pool[type] ? 'rgb(255, 99, 99)' : 'rgb(99, 132, 255)'
            ),
            borderWidth: 1
          }))
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true,
              title: { display: true, text: 'èµ„æºæ•°é‡' }
            },
            x: {
              title: { display: true, text: 'å¤©æ•°' }
            }
          },
          plugins: {
            legend: { display: true },
            annotation: {
              annotations: Object.entries(pool).map(([type, limit]) => ({
                type: 'line',
                yMin: limit,
                yMax: limit,
                borderColor: 'red',
                borderWidth: 2,
                borderDash: [5, 5],
                label: {
                  content: `${type}ä¸Šé™: ${limit}`,
                  enabled: true
                }
              }))
            }
          }
        }
      });

      return () => {
        if (chartInstance.current) {
          chartInstance.current.destroy();
        }
      };
    }, [tasks, resourcePool]);

    return (
      <div className="resource-chart">
        <h3>èµ„æºå ç”¨æƒ…å†µï¼ˆçº¢è‰²=è¶…é™ï¼‰</h3>
        <canvas ref={chartRef} height="100"></canvas>
      </div>
    );
  }

  export default ResourceChart;
  ```

#### 4.5 ç®€åŒ–ä»»åŠ¡åˆ—è¡¨
- [ ] **Phase1TaskList.jsx** (ä¸æ˜¾ç¤ºCPMæ•°æ®)
  ```jsx
  function Phase1TaskList() {
    const { tasks } = useSelector(state => state.phase1);

    return (
      <div className="phase1-task-list">
        <h3>ä»»åŠ¡åˆ—è¡¨</h3>
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>ä»»åŠ¡åç§°</th>
              <th>å·¥æœŸ(å¤©)</th>
              <th>å‰ç½®ä»»åŠ¡</th>
              <th>å¼€å§‹æ—¶é—´</th>
              <th>çŠ¶æ€</th>
            </tr>
          </thead>
          <tbody>
            {tasks.map(task => (
              <tr key={task.id}>
                <td>{task.id}</td>
                <td>{task.name}</td>
                <td>{task.duration}</td>
                <td>{task.predecessors.join(', ') || 'æ— '}</td>
                <td>{task.isPlaced ? `ç¬¬${task.startDay}å¤©` : '-'}</td>
                <td>
                  {task.isPlaced ? 'âœ“ å·²æ”¾ç½®' : 'å¾…æ”¾ç½®'}
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    );
  }
  ```

#### 4.6 éªŒè¯å¼¹çª—(ç»„åˆæ–¹æ¡ˆA+B)
- [ ] **ValidationModal.jsx**
  ```jsx
  import React, { useState } from 'react';
  import { useDispatch, useSelector } from 'react-redux';
  import { validatePhase1Submission } from '../../validators/phase1Validator';
  import { setValidationErrors, markPassed } from '../../store/phase1Slice';
  import { setPhase1Result } from '../../store/gameSlice';
  import axios from 'axios';

  function ValidationModal({ isOpen, onClose }) {
    const dispatch = useDispatch();
    const [isSubmitting, setIsSubmitting] = useState(false);
    const { tasks, resourcePool, config, validationErrors } = useSelector(state => state.phase1);
    const { token } = useSelector(state => state.auth);

    const handleSubmit = async () => {
      setIsSubmitting(true);

      // æ‰§è¡ŒéªŒè¯
      const result = validatePhase1Submission(tasks, resourcePool, config);
      dispatch(setValidationErrors(result.errors));

      if (!result.isValid) {
        setIsSubmitting(false);
        return; // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
      }

      // é€šè¿‡éªŒè¯ï¼Œæäº¤åˆ°åç«¯
      try {
        const response = await axios.post(
          '/api/phase1/submit',
          {
            finalDuration: result.errors.duration.current,
            taskPlacements: tasks.filter(t => t.isPlaced).map(t => ({
              taskId: t.id,
              startDay: t.startDay
            }))
          },
          {
            headers: { Authorization: `Bearer ${token}` }
          }
        );

        // æ›´æ–°çŠ¶æ€å¹¶åˆ‡æ¢åˆ°é˜¶æ®µ2
        dispatch(markPassed());
        dispatch(setPhase1Result({ score: response.data.score }));

        alert(config.validationMessages.pass);
        // é¡µé¢å°†è‡ªåŠ¨åˆ‡æ¢åˆ°é˜¶æ®µ2(é€šè¿‡App.jsxçš„é€»è¾‘)

      } catch (error) {
        console.error('æäº¤å¤±è´¥:', error);
        alert('æäº¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
      } finally {
        setIsSubmitting(false);
      }
    };

    if (!isOpen) return null;

    const { duration, dependencies, resources, unplaced } = validationErrors;
    const hasErrors = !duration.isValid ||
                      dependencies.length > 0 ||
                      resources.length > 0 ||
                      unplaced.length > 0;

    return (
      <div className="modal-overlay">
        <div className="validation-modal">
          <h2>æäº¤éªŒè¯</h2>

          {hasErrors ? (
            <div className="validation-errors">
              <h3>âŒ æäº¤å¤±è´¥ï¼Œè¯·ä¿®æ­£ä»¥ä¸‹é—®é¢˜ï¼š</h3>

              {/* å·¥æœŸé—®é¢˜ */}
              {!duration.isValid && (
                <div className="error-section">
                  <h4>ğŸ“… å·¥æœŸè¶…é™</h4>
                  <p>å½“å‰æ€»å·¥æœŸï¼š{duration.current}å¤©</p>
                  <p>è¦æ±‚ï¼šâ‰¤ {duration.max}å¤©</p>
                </div>
              )}

              {/* æœªæ”¾ç½®ä»»åŠ¡ */}
              {unplaced.length > 0 && (
                <div className="error-section">
                  <h4>ğŸ“‹ æœªæ”¾ç½®ä»»åŠ¡ ({unplaced.length}ä¸ª)</h4>
                  <ul>
                    {unplaced.map(err => (
                      <li key={err.taskId}>{err.taskId}: {err.taskName}</li>
                    ))}
                  </ul>
                </div>
              )}

              {/* ä¾èµ–é—®é¢˜ */}
              {dependencies.length > 0 && (
                <div className="error-section">
                  <h4>â›“ï¸ å‰ç½®ä¾èµ–è¿è§„ ({dependencies.length}ä¸ª)</h4>
                  <ul>
                    {dependencies.map((err, idx) => (
                      <li key={idx} className="error-item">
                        {err.message}
                      </li>
                    ))}
                  </ul>
                </div>
              )}

              {/* èµ„æºå†²çª */}
              {resources.length > 0 && (
                <div className="error-section">
                  <h4>âš ï¸ èµ„æºå†²çª ({resources.length}ä¸ªæ—¶æ®µ)</h4>
                  <ul>
                    {resources.map((err, idx) => (
                      <li key={idx} className="error-item">
                        ç¬¬{err.day}å¤©: {err.resourceType}
                        éœ€æ±‚<span className="error-value">{err.required}</span>
                        &gt; å¯ç”¨<span className="limit-value">{err.available}</span>
                        (è¶…å‡º{err.exceed})
                      </li>
                    ))}
                  </ul>
                </div>
              )}

              <button onClick={onClose} className="btn-back">
                è¿”å›ä¿®æ”¹
              </button>
            </div>
          ) : (
            <div className="validation-success">
              <h3>âœ“ éªŒè¯é€šè¿‡ï¼</h3>
              <p>æ€»å·¥æœŸï¼š{duration.current}å¤©ï¼ˆâ‰¤ {duration.max}å¤©ï¼‰</p>
              <p>æ‰€æœ‰ä¾èµ–å…³ç³»æ»¡è¶³ âœ“</p>
              <p>æ— èµ„æºå†²çª âœ“</p>

              <button
                onClick={handleSubmit}
                disabled={isSubmitting}
                className="btn-submit"
              >
                {isSubmitting ? 'æäº¤ä¸­...' : 'ç¡®è®¤æäº¤å¹¶è¿›å…¥é˜¶æ®µ2'}
              </button>
              <button onClick={onClose} className="btn-cancel">
                å–æ¶ˆ
              </button>
            </div>
          )}
        </div>
      </div>
    );
  }

  export default ValidationModal;
  ```

#### 4.7 é¡¶éƒ¨å·¥å…·æ 
- [ ] **Phase1Header.jsx**
  ```jsx
  function Phase1Header() {
    const [showModal, setShowModal] = useState(false);
    const { projectName, unplacedTaskIds } = useSelector(state => state.phase1);

    return (
      <div className="phase1-header">
        <h1>{projectName}</h1>
        <div className="header-info">
          <span>é˜¶æ®µ1: æ‰‹åŠ¨æ’ç¨‹è®­ç»ƒ</span>
          <span className="unplaced-count">
            å¾…æ”¾ç½®ä»»åŠ¡: {unplacedTaskIds.length}
          </span>
        </div>
        <button
          onClick={() => setShowModal(true)}
          className="btn-submit-phase1"
        >
          æäº¤é˜¶æ®µ1
        </button>

        <ValidationModal
          isOpen={showModal}
          onClose={() => setShowModal(false)}
        />
      </div>
    );
  }
  ```

#### 4.8 CSSæ ·å¼
- [ ] **æ–°å»ºæ–‡ä»¶**: `Phase1.css`
  ```css
  /* æœªæ”¾ç½®ä»»åŠ¡æ ·å¼ */
  .gantt_task.unplaced-task {
    opacity: 0.5;
    border: 2px dashed #999;
  }

  /* ä¾èµ–é”™è¯¯ä»»åŠ¡æ ·å¼ */
  .gantt_task.dependency-error {
    border: 3px solid #ff0000;
    box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
  }

  /* èµ„æºæ›²çº¿å›¾ */
  .resource-chart {
    padding: 1rem;
    background: #f5f5f5;
    border-bottom: 1px solid #ddd;
  }

  /* éªŒè¯å¼¹çª— */
  .validation-modal {
    max-width: 600px;
    max-height: 80vh;
    overflow-y: auto;
    background: white;
    padding: 2rem;
    border-radius: 8px;
  }

  .error-section {
    margin: 1rem 0;
    padding: 1rem;
    background: #fff3f3;
    border-left: 4px solid #ff4444;
  }

  .error-item {
    margin: 0.5rem 0;
    color: #d32f2f;
  }

  .error-value {
    font-weight: bold;
    color: #ff0000;
  }

  .limit-value {
    font-weight: bold;
    color: #666;
  }
  ```

---

### ä»»åŠ¡5: åç«¯APIæ‰©å±•
**é¢„ä¼°å·¥æ—¶**: 1å¤©
**ä¾èµ–**: æ— 

#### 5.1 æ•°æ®åº“è¿ç§»
- [ ] **ä¿®æ”¹æ–‡ä»¶**: `backend/database-schema.sql` (æ–°å»º)
  ```sql
  -- é˜¶æ®µ1æˆç»©è¡¨
  CREATE TABLE IF NOT EXISTS Phase1Results (
      id SERIAL PRIMARY KEY,
      user_id INTEGER REFERENCES Users(id) UNIQUE,
      is_passed BOOLEAN DEFAULT FALSE,
      score INTEGER DEFAULT 0,
      final_duration INTEGER,
      submit_attempts INTEGER DEFAULT 0,
      passed_at TIMESTAMP,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  );

  -- ä¸ºuser_idåˆ›å»ºç´¢å¼•
  CREATE INDEX idx_phase1_user ON Phase1Results(user_id);
  ```

- [ ] æ‰§è¡Œæ•°æ®åº“è¿ç§»è„šæœ¬

#### 5.2 ä¿®æ”¹ç™»å½•API
- [ ] **ä¿®æ”¹æ–‡ä»¶**: `backend/server.js`
  ```javascript
  app.post('/api/auth/login', async (req, res) => {
    const { name, studentId } = req.body;
    if (!name || !studentId) {
        return res.status(400).json({ error: 'Name and studentId are required.' });
    }

    try {
        // 1. éªŒè¯ç”¨æˆ·
        const userResult = await pool.query(
          'SELECT * FROM Users WHERE name = $1 AND student_id = $2',
          [name, studentId]
        );
        const user = userResult.rows[0];
        if (!user) {
            return res.status(401).json({ error: 'Invalid credentials.' });
        }

        // 2. æŸ¥è¯¢é˜¶æ®µ1çŠ¶æ€
        const phase1Result = await pool.query(
          'SELECT is_passed FROM Phase1Results WHERE user_id = $1',
          [user.id]
        );
        const phase1Passed = phase1Result.rows[0]?.is_passed || false;
        const currentPhase = phase1Passed ? 2 : 1;

        // 3. ç”ŸæˆJWT (åŒ…å«currentPhase)
        const token = jwt.sign(
          {
            userId: user.id,
            name: user.name,
            studentId: user.student_id,
            currentPhase  // å…³é”®ï¼
          },
          JWT_SECRET,
          { expiresIn: '8h' }
        );

        res.json({
          message: 'Login successful!',
          token,
          currentPhase  // è¿”å›ç»™å‰ç«¯
        });

    } catch (err) {
        console.error('Login error:', err);
        res.status(500).json({ error: 'Internal server error' });
    }
  });
  ```

#### 5.3 æ–°å¢é˜¶æ®µ1æäº¤API
- [ ] **ä¿®æ”¹æ–‡ä»¶**: `backend/server.js`
  ```javascript
  // æäº¤é˜¶æ®µ1æˆç»©
  app.post('/api/phase1/submit', authMiddleware, async (req, res) => {
    const userId = req.user.userId;
    const { finalDuration, taskPlacements } = req.body;

    if (!finalDuration) {
      return res.status(400).json({ error: 'Missing finalDuration' });
    }

    try {
      // æ£€æŸ¥æ˜¯å¦å·²é€šè¿‡
      const existingResult = await pool.query(
        'SELECT is_passed FROM Phase1Results WHERE user_id = $1',
        [userId]
      );

      if (existingResult.rows[0]?.is_passed) {
        return res.status(400).json({
          error: 'You have already passed Phase 1'
        });
      }

      // æ’å…¥æˆ–æ›´æ–°æˆç»©
      const upsertQuery = `
        INSERT INTO Phase1Results (user_id, is_passed, score, final_duration, submit_attempts, passed_at)
        VALUES ($1, TRUE, 60, $2, COALESCE((SELECT submit_attempts FROM Phase1Results WHERE user_id = $1), 0) + 1, CURRENT_TIMESTAMP)
        ON CONFLICT (user_id)
        DO UPDATE SET
          is_passed = TRUE,
          score = 60,
          final_duration = EXCLUDED.final_duration,
          submit_attempts = Phase1Results.submit_attempts + 1,
          passed_at = CURRENT_TIMESTAMP;
      `;

      await pool.query(upsertQuery, [userId, finalDuration]);

      res.json({
        success: true,
        score: 60,
        message: 'âœ“ é˜¶æ®µ1é€šè¿‡ï¼'
      });

    } catch (err) {
      console.error('Phase1 submission error:', err);
      res.status(500).json({ error: 'Internal server error' });
    }
  });
  ```

#### 5.4 æŸ¥è¯¢é˜¶æ®µçŠ¶æ€API(å¯é€‰)
- [ ] **æ–°å¢**: `GET /api/user/phase-status`
  ```javascript
  app.get('/api/user/phase-status', authMiddleware, async (req, res) => {
    const userId = req.user.userId;

    try {
      const result = await pool.query(
        'SELECT is_passed, score, submit_attempts FROM Phase1Results WHERE user_id = $1',
        [userId]
      );

      const phase1Data = result.rows[0] || {
        is_passed: false,
        score: 0,
        submit_attempts: 0
      };

      res.json({
        currentPhase: phase1Data.is_passed ? 2 : 1,
        phase1: phase1Data
      });

    } catch (err) {
      console.error('Phase status query error:', err);
      res.status(500).json({ error: 'Internal server error' });
    }
  });
  ```

---

### ä»»åŠ¡6: é˜¶æ®µåˆ‡æ¢ä¸è·¯ç”±é›†æˆ
**é¢„ä¼°å·¥æ—¶**: 1å¤©
**ä¾èµ–**: ä»»åŠ¡2, ä»»åŠ¡4å®Œæˆ

#### 6.1 ä¿®æ”¹App.jsxä¸»è·¯ç”±
- [ ] **ä¿®æ”¹æ–‡ä»¶**: `fronted/src/App.jsx`
  ```jsx
  import { useEffect } from 'react';
  import { useDispatch, useSelector } from 'react-redux';
  import { initializeFromAuth } from './store/gameSlice';
  import { setProjectData } from './store/projectSlice';
  import Login from './components/Login';
  import Phase1Container from './components/Phase1/Phase1Container';
  import Phase2Container from './components/Phase2/Phase2Container'; // é‡å‘½åMainApp

  function App() {
    const dispatch = useDispatch();
    const { isAuthenticated, token } = useSelector(state => state.auth);
    const { currentPhase } = useSelector(state => state.game);
    const phase2Loaded = useSelector(state => state.project.present.isLoaded);

    useEffect(() => {
      if (isAuthenticated && token) {
        // ä»JWT tokenè§£æcurrentPhase
        try {
          const payload = JSON.parse(atob(token.split('.')[1]));
          dispatch(initializeFromAuth({ currentPhase: payload.currentPhase }));
        } catch (err) {
          console.error('Token parse error:', err);
        }
      }
    }, [isAuthenticated, token, dispatch]);

    useEffect(() => {
      // ä»…åœ¨é˜¶æ®µ2ä¸”æ•°æ®æœªåŠ è½½æ—¶åŠ è½½
      if (currentPhase === 2 && !phase2Loaded) {
        const loadPhase2Data = async () => {
          try {
            const response = await fetch('/phase2-project.json');
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            const data = await response.json();
            dispatch(setProjectData(data));
          } catch (error) {
            console.error("åŠ è½½é˜¶æ®µ2æ•°æ®å¤±è´¥:", error);
          }
        };
        loadPhase2Data();
      }
    }, [currentPhase, phase2Loaded, dispatch]);

    // è·¯ç”±é€»è¾‘
    if (!isAuthenticated) {
      return <Login />;
    }

    if (currentPhase === 1) {
      return <Phase1Container />;
    }

    if (currentPhase === 2) {
      if (!phase2Loaded) {
        return <div className="loading">æ­£åœ¨åŠ è½½é˜¶æ®µ2æ•°æ®...</div>;
      }
      return <Phase2Container />;
    }

    return <div>Unknown phase</div>;
  }

  export default App;
  ```

#### 6.2 åˆ›å»ºé˜¶æ®µ2å®¹å™¨ç»„ä»¶
- [ ] **æ–°å»ºç›®å½•**: `fronted/src/components/Phase2/`
- [ ] **ç§»åŠ¨æ–‡ä»¶**: å°†ç°æœ‰ç»„ä»¶ç§»å…¥Phase2ç›®å½•
  - Dashboard.jsx
  - GanttChart.jsx
  - GanttWrapper.jsx
  - TaskList.jsx
  - InspectorPanel.jsx
  - Leaderboard.jsx
  - SubmissionModal.jsx
  - UndoRedo.jsx

- [ ] **æ–°å»ºæ–‡ä»¶**: `Phase2Container.jsx`
  ```jsx
  import Dashboard from './Dashboard';
  import GanttChart from './GanttChart';
  import TaskList from './TaskList';
  import InspectorPanel from './InspectorPanel';
  import Leaderboard from './Leaderboard';
  import './Phase2.css';

  function Phase2Container() {
    return (
      <div className="phase2-container app-container">
        <Dashboard />
        <GanttChart />
        <div className="main-view">
          <TaskList />
          <InspectorPanel />
        </div>
        <Leaderboard />
      </div>
    );
  }

  export default Phase2Container;
  ```

#### 6.3 æ›´æ–°å¯¼å…¥è·¯å¾„
- [ ] æ‰¹é‡æ›´æ–°æ‰€æœ‰ç§»åŠ¨ç»„ä»¶çš„importè·¯å¾„
- [ ] æµ‹è¯•ç¡®ä¿é˜¶æ®µ2åŠŸèƒ½å®Œæ•´æ— æŸ

---

## ğŸŸ  P1çº§ä»»åŠ¡ (é‡è¦ä½†å¯åç»­è¿­ä»£)

### ä»»åŠ¡7: é›†æˆæµ‹è¯•ä¸ä¼˜åŒ–
**é¢„ä¼°å·¥æ—¶**: 1å¤©

#### 7.1 åŠŸèƒ½æµ‹è¯•
- [ ] **é˜¶æ®µ1å®Œæ•´æµç¨‹**
  - ç™»å½• â†’ çœ‹åˆ°é˜¶æ®µ1ç•Œé¢
  - æ‹–æ‹½ä»»åŠ¡åˆ°ç”˜ç‰¹å›¾
  - è§¦å‘å„ç§éªŒè¯é”™è¯¯
  - ä¿®æ­£åæˆåŠŸæäº¤
  - è‡ªåŠ¨åˆ‡æ¢åˆ°é˜¶æ®µ2

- [ ] **é˜¶æ®µ2åŠŸèƒ½éªŒè¯**
  - ç¡®è®¤ç°æœ‰åŠŸèƒ½æ­£å¸¸
  - Dashboardæ˜¾ç¤ºæ­£ç¡®
  - å‹ç¼©å·¥åºç”Ÿæ•ˆ
  - æ’è¡Œæ¦œæäº¤æˆåŠŸ

- [ ] **é‡å¤ç™»å½•æµ‹è¯•**
  - æœªé€šè¿‡é˜¶æ®µ1: è¿›å…¥é˜¶æ®µ1
  - å·²é€šè¿‡é˜¶æ®µ1: ç›´æ¥è¿›å…¥é˜¶æ®µ2

#### 7.2 è¾¹ç•Œæƒ…å†µæµ‹è¯•
- [ ] æ‰€æœ‰ä»»åŠ¡å †å åœ¨Day 0(åˆå§‹çŠ¶æ€)
- [ ] åˆ·æ–°é¡µé¢(çŠ¶æ€ä¸¢å¤±ï¼Œéœ€é‡æ–°ç™»å½•)
- [ ] Tokenè¿‡æœŸå¤„ç†
- [ ] ç½‘ç»œé”™è¯¯å¤„ç†
- [ ] åç«¯éªŒè¯ä¸å‰ç«¯éªŒè¯çš„ä¸€è‡´æ€§

#### 7.3 æ€§èƒ½ä¼˜åŒ–
- [ ] èµ„æºéªŒè¯é˜²æŠ–(æ‹–æ‹½æ—¶ä¸è¦æ¯æ¬¡éƒ½è®¡ç®—)
- [ ] ç”˜ç‰¹å›¾æ¸²æŸ“ä¼˜åŒ–(ä»»åŠ¡æ•°>30æ—¶)
- [ ] ReduxçŠ¶æ€æ›´æ–°ä¼˜åŒ–

#### 7.4 ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- [ ] æ·»åŠ åŠ è½½åŠ¨ç”»
- [ ] æ‹–æ‹½æ—¶æ˜¾ç¤ºè¾…åŠ©ç½‘æ ¼çº¿
- [ ] éªŒè¯é”™è¯¯é«˜äº®ç”˜ç‰¹å›¾(Bæ–¹æ¡ˆ)
- [ ] æ·»åŠ æ“ä½œæç¤º(é¦–æ¬¡è¿›å…¥æ—¶)

---

## ğŸŸ¢ P2çº§ä»»åŠ¡ (é”¦ä¸Šæ·»èŠ±)

### ä»»åŠ¡8: ç½‘ç»œå›¾è§†å›¾ (é˜¶æ®µ2å¯é€‰)
**é¢„ä¼°å·¥æ—¶**: 2-3å¤©
**ä¼˜å…ˆçº§**: ä½ï¼ˆé˜¶æ®µ2å¢å¼ºåŠŸèƒ½ï¼‰

- [ ] æŠ€æœ¯é€‰å‹: D3.js / vis.js
- [ ] åˆ›å»º `NetworkDiagram.jsx` ç»„ä»¶
- [ ] å®ç°AONå›¾å¸ƒå±€
- [ ] é«˜äº®å…³é”®è·¯å¾„
- [ ] ä¸TaskList/GanttChartè”åŠ¨

### ä»»åŠ¡9: æ•°æ®å®Œå–„
**é¢„ä¼°å·¥æ—¶**: 1-2å¤©

- [ ] è®¾è®¡25ä¸ªä»»åŠ¡çš„é˜¶æ®µ2é¡¹ç›®
- [ ] ä¼˜åŒ–é˜¶æ®µ1é¡¹ç›®çš„éš¾åº¦æ›²çº¿
- [ ] å‡†å¤‡å¤šä¸ªé˜¶æ®µ1é¡¹ç›®(ä¸åŒéš¾åº¦)
- [ ] è°ƒæ•´èµ„æºæ± å’Œé˜ˆå€¼å¹³è¡¡æ€§

### ä»»åŠ¡10: é«˜çº§åŠŸèƒ½
- [ ] é˜¶æ®µ1"è‡ªåŠ¨ä¿®å¤"æŒ‰é’®(ä¿®æ­£ä¾èµ–è¿è§„)
- [ ] é˜¶æ®µ1"æŸ¥çœ‹æç¤º"åŠŸèƒ½(æ˜¾ç¤ºå»ºè®®æ”¾ç½®ä½ç½®)
- [ ] å¯¼å‡ºé˜¶æ®µ1æ’ç¨‹ç»“æœ(PDF)
- [ ] ç»ƒä¹ /æŒ‘æˆ˜æ¨¡å¼åˆ‡æ¢(éšè—å…³é”®è·¯å¾„)

---

## ğŸ“‹ é‡Œç¨‹ç¢‘è§„åˆ’

### Sprint 1: æ ¸å¿ƒåŠŸèƒ½å¼€å‘ (4å¤©)
**ç›®æ ‡**: é˜¶æ®µ1åŸºç¡€åŠŸèƒ½å¯è¿è¡Œ

- [x] é˜¶æ®µ2ç°æœ‰åŠŸèƒ½ (å·²å®Œæˆ)
- [ ] ä»»åŠ¡1: æ•°æ®å±‚å‡†å¤‡ (0.5å¤©)
- [ ] ä»»åŠ¡2: Reduxé‡æ„ (0.5å¤©)
- [ ] ä»»åŠ¡3: éªŒè¯å™¨å¼•æ“ (1å¤©)
- [ ] ä»»åŠ¡4: é˜¶æ®µ1 UI (2å¤©)

**éªŒæ”¶æ ‡å‡†**:
- âœ… å¯ä»¥æ‹–æ‹½ä»»åŠ¡åˆ°ç”˜ç‰¹å›¾
- âœ… èµ„æºæ›²çº¿å›¾æ­£ç¡®æ˜¾ç¤º
- âœ… éªŒè¯å¼¹çª—æ˜¾ç¤ºæ‰€æœ‰é”™è¯¯

### Sprint 2: åç«¯é›†æˆä¸é˜¶æ®µåˆ‡æ¢ (2å¤©)
**ç›®æ ‡**: å®Œæ•´æµç¨‹æ‰“é€š

- [ ] ä»»åŠ¡5: åç«¯APIæ‰©å±• (1å¤©)
- [ ] ä»»åŠ¡6: é˜¶æ®µåˆ‡æ¢è·¯ç”± (1å¤©)

**éªŒæ”¶æ ‡å‡†**:
- âœ… ç™»å½•åæ­£ç¡®è¿›å…¥å¯¹åº”é˜¶æ®µ
- âœ… é˜¶æ®µ1é€šè¿‡åè‡ªåŠ¨åˆ‡æ¢
- âœ… åç«¯å­˜å‚¨æˆç»©

### Sprint 3: æµ‹è¯•ä¸ä¼˜åŒ– (1.5å¤©)
**ç›®æ ‡**: ç¨³å®šå¯å‘å¸ƒ

- [ ] ä»»åŠ¡7: é›†æˆæµ‹è¯• (1å¤©)
- [ ] Bugä¿®å¤ä¸ä¼˜åŒ– (0.5å¤©)

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ— å…³é”®Bug
- âœ… æ€§èƒ½å¯æ¥å—
- âœ… ç”¨æˆ·ä½“éªŒæµç•…

### Sprint 4: æ‰©å±•åŠŸèƒ½ (å¯é€‰, 3-5å¤©)
- [ ] ä»»åŠ¡8: ç½‘ç»œå›¾è§†å›¾
- [ ] ä»»åŠ¡9: æ•°æ®å®Œå–„
- [ ] ä»»åŠ¡10: é«˜çº§åŠŸèƒ½

---

## âš ï¸ é£é™©ä¸æ³¨æ„äº‹é¡¹

### æŠ€æœ¯é£é™©
1. **dhtmlx-ganttæ‹–æ‹½é™åˆ¶**
   - é£é™©: é»˜è®¤è¡Œä¸ºå¯èƒ½ä¿®æ”¹ä»»åŠ¡å±‚çº§
   - ç¼“è§£: ä½¿ç”¨ `onBeforeTaskDrag` æ‹¦æˆªå¹¶é™åˆ¶

2. **å®æ—¶éªŒè¯æ€§èƒ½**
   - é£é™©: 15ä¸ªä»»åŠ¡Ã—150å¤©çš„èµ„æºè®¡ç®—å¯èƒ½å¡é¡¿
   - ç¼“è§£: é˜²æŠ–ä¼˜åŒ– + Web Worker(å¯é€‰)

3. **çŠ¶æ€åŒæ­¥é—®é¢˜**
   - é£é™©: ReduxçŠ¶æ€ä¸ganttå®ä¾‹ä¸åŒæ­¥
   - ç¼“è§£: å•å‘æ•°æ®æµ(Redux â†’ Gantt)

### ç”¨æˆ·ä½“éªŒé£é™©
1. **å­¦ä¹ æ›²çº¿é™¡å³­**
   - é£é™©: æ–°æ‰‹ä¸ç†è§£è§„åˆ™
   - ç¼“è§£: ä¾èµ–PDFæ•™ç¨‹ + æ¸…æ™°çš„é”™è¯¯æç¤º

2. **æŒ«è´¥æ„Ÿ**
   - é£é™©: å¤šæ¬¡æäº¤å¤±è´¥
   - ç¼“è§£: è¯¦ç»†çš„é”™è¯¯å®šä½ + ç”˜ç‰¹å›¾é«˜äº®

### æ•°æ®è®¾è®¡é£é™©
1. **é˜ˆå€¼è®¾ç½®ä¸åˆç†**
   - é£é™©: å¤ªå®¹æ˜“(å¤±å»æŒ‘æˆ˜) / å¤ªéš¾(é€šè¿‡ç‡ä½)
   - ç¼“è§£: å†…éƒ¨æµ‹è¯•è°ƒæ•´å‚æ•°

2. **èµ„æºåˆ†é…å†²çª**
   - é£é™©: æ— è§£æˆ–å”¯ä¸€è§£
   - ç¼“è§£: è®¾è®¡å¤šç§å¯è¡Œæ–¹æ¡ˆ

---

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç è§„èŒƒ
- æ‰€æœ‰æ–°ç»„ä»¶ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ + Hooks
- ReduxçŠ¶æ€æ›´æ–°å¿…é¡»é€šè¿‡dispatch actions
- éªŒè¯é€»è¾‘ä¸UIé€»è¾‘åˆ†ç¦»
- å…³é”®å‡½æ•°æ·»åŠ JSDocæ³¨é‡Š

### æµ‹è¯•è¦æ±‚
- éªŒè¯å™¨å¿…é¡»æœ‰å•å…ƒæµ‹è¯•
- å…³é”®ç”¨æˆ·æµç¨‹å¿…é¡»æ‰‹åŠ¨æµ‹è¯•
- æäº¤å‰æ£€æŸ¥console.error

### Gitæäº¤è§„èŒƒ
```
feat: æ·»åŠ é˜¶æ®µ1åœè½¦åœºç»„ä»¶
fix: ä¿®å¤èµ„æºéªŒè¯bug
refactor: é‡æ„ReduxçŠ¶æ€ç»“æ„
test: æ·»åŠ ä¾èµ–éªŒè¯å™¨æµ‹è¯•
docs: æ›´æ–°TODOæ–‡æ¡£
```

---

## ğŸ“Œ é™„å½•

### å…³é”®è®¾è®¡å†³ç­–è®°å½•

#### å†³ç­–1: ä¸¤é˜¶æ®µç‹¬ç«‹é¡¹ç›®
**èƒŒæ™¯**: åŸè®¡åˆ’é˜¶æ®µ2å¤ç”¨é˜¶æ®µ1æ’ç¨‹ç»“æœ
**å˜æ›´**: ä¸¤é˜¶æ®µä½¿ç”¨å®Œå…¨ç‹¬ç«‹çš„é¡¹ç›®æ•°æ®
**åŸå› **:
- ç®€åŒ–å®ç°(æ— éœ€çŠ¶æ€ä¼ é€’)
- é˜¶æ®µ1å¯å¤šæ¬¡å°è¯•ä¸å½±å“é˜¶æ®µ2
- å­¦ç”Ÿå¯å¯¹æ¯”"æˆ‘çš„æ–¹æ¡ˆ vs ç®—æ³•æ–¹æ¡ˆ"

#### å†³ç­–2: åœè½¦åœºæ–¹æ¡ˆB(å †å Day 0)
**å¯¹æ¯”æ–¹æ¡ˆ**: ç‹¬ç«‹åœè½¦åœºåŒºåŸŸ vs Day 0å †å 
**é€‰æ‹©**: Day 0å †å 
**åŸå› **:
- å®ç°ç®€å•(dhtmlxåŸç”Ÿæ”¯æŒ)
- å‡å°‘UIå¤æ‚åº¦
- æ»¡è¶³"æ‹–æ‹½åˆ†æ•£"éœ€æ±‚

#### å†³ç­–3: éªŒè¯æ–¹æ¡ˆA+Bç»„åˆ
**å¯¹æ¯”æ–¹æ¡ˆ**: ä»…å¼¹çª— vs ä»…é«˜äº® vs ç»„åˆ
**é€‰æ‹©**: ç»„åˆæ–¹æ¡ˆ
**åŸå› **:
- å¼¹çª—æä¾›è¯¦ç»†æ–‡å­—è¯´æ˜
- ç”˜ç‰¹å›¾é«˜äº®æä¾›è§†è§‰å®šä½
- ä¸¤è€…äº’è¡¥æå‡ä½“éªŒ

#### å†³ç­–4: é˜¶æ®µ1ä¸æ˜¾ç¤ºCPMæ•°æ®
**èƒŒæ™¯**: æ˜¯å¦æ˜¾ç¤ºå…³é”®è·¯å¾„ã€ES/LSç­‰
**é€‰æ‹©**: å®Œå…¨ä¸æ˜¾ç¤º
**åŸå› **:
- é¿å…å­¦ç”Ÿç›´æ¥æŠ„ç­”æ¡ˆ
- å¼ºè°ƒæ‰‹åŠ¨æ’ç¨‹ä½“éªŒ
- é˜¶æ®µ1é‡ç‚¹æ˜¯ä¾èµ–+èµ„æº,ä¸æ˜¯ä¼˜åŒ–

### æ•°æ®æ–‡ä»¶æ¸…å•

| æ–‡ä»¶è·¯å¾„ | ç”¨é€” | è´Ÿè´£äºº | çŠ¶æ€ |
|---------|------|--------|------|
| `phase1-project.json` | é˜¶æ®µ1é¡¹ç›®æ•°æ®(15ä»»åŠ¡) | å…ˆç”¨AIç”Ÿæˆ,ä½ åç»­æ›¿æ¢ | å¾…åˆ›å»º |
| `phase1-config.json` | é˜¶æ®µ1é…ç½®(é˜ˆå€¼/æç¤ºè¯­) | ä½ æä¾›é˜ˆå€¼ | å¾…åˆ›å»º |
| `phase2-project.json` | é˜¶æ®µ2é¡¹ç›®æ•°æ®(10ä»»åŠ¡) | å·²å­˜åœ¨(æ”¹å) | å®Œæˆ |
| `phase2-config.json` | é˜¶æ®µ2é…ç½®(å¯é€‰) | å¯é€‰ | - |

### ç¤ºä¾‹JWT Tokenç»“æ„
```json
{
  "userId": 123,
  "name": "å¼ ä¸‰",
  "studentId": "2021001",
  "currentPhase": 1,  // å…³é”®å­—æ®µ
  "iat": 1696752000,
  "exp": 1696780800
}
```

---

**æ–‡æ¡£ç»´æŠ¤è€…**: Claude Code
**é¡¹ç›®è·¯å¾„**: `d:\1_AAA_HJB\Operations Research\project-blueprint`
**æœ€ååŒæ­¥**: 2025-10-07 23:45
