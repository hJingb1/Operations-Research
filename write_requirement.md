
项目设计说明书

## 1. 项目愿景与核心定位

*   **项目名称：** 运筹学课程项目设计
*   **项目类型：** 教学用项目管理模拟器
*   **核心目标：** 将抽象的运筹学理论（网络计划技术、关键路径法CPM、计划评审技术PERT）转化为一个可视化的、可交互的、游戏化的学习沙盘，帮助学生在实践中掌握项目进度规划与优化。
*   **设计哲学：**
    *   **从“计算”到“感知”：** 通过即时反馈，让学生直观感受到“关键路径”、“时差”、“时间-成本权衡”等概念的实际意义。
    *   **从“单一答案”到“权衡决策”：** 强调不存在完美解，引导学生在时间、成本、资源等多个约束条件下做出合理的权衡与决策。
    *   **从“工具”到“沙盘”：** 提供一个零成本、可反复试错的安全环境，鼓励学生大胆探索不同的优化策略。

## 2. 平台与用户工作流

*   **目标平台：** **桌面电脑优先 (PC/Desktop First)**。大屏幕和鼠标能保证复杂视图（网络图、甘特图）的清晰呈现和精确操作。手机端可作为未来的轻量级“查看器”，但不作为核心设计平台。
*   **核心用户：** 课程设计学生
*   **完整工作流：**
    1.  **启动与登录：** 学生打开程序，输入后台CSV名单中预设的【姓名】与【学号】进行身份验证。
    2.  **项目加载：** 验证通过后，系统自动加载内置的、统一的初始项目`.json`文件。
    3.  **分析现状：** 程序呈现项目的初始状态，包括网络图、甘特图以及仪表盘上的核心指标（总工期、总费用等）。
    4.  **优化决策：** 学生通过分析，对可压缩工序进行“赶工”，并手动解决因资源限制而产生的冲突。
    5.  **提交方案：** 当学生认为某个方案在特定目标下最优时，可将该方案提交至三个赛道之一。
    6.  **查看排名：** 提交后，若成绩达到“上榜线”，可在实时排行榜上看到自己的排名。
    7.  **持续优化：** 学生可以在当前方案基础上继续调整，或重置项目，为其他赛道寻找更优解。
    8.  **生成报告：** 对最终满意的方案，学生可以导出关键信息总结，用于撰写课程设计报告。

## 3. 核心功能与机制

### 3.1. 项目数据模型
*   **项目规模：** 约25个工序/任务。
*   **项目级参数：**
    *   `indirect_cost_per_day`：项目每日的间接费用。
*   **工序级参数：**
    *   `id`：唯一序号
    *   `name`：工序名称
    *   `predecessors`: 前置工序ID列表
    *   `resources`: 资源需求 (例如: `{ "worker": 10, "crane": 1 }`)
    *   `time_normal`: 正常工期 (天)
    *   `cost_normal`: 正常工期对应的直接费用
    *   `time_crash`: 应急(最短)工期 (天)
    *   `cost_crash`: 应急工期对应的直接费用
    *   `compressible`: 布尔值，标记该工序是否可压缩

### 3.2. 核心模拟引擎
*   **时间与关键路径：**
    *   **练习模式：** 系统自动计算并高亮显示关键路径。
    *   **挑战模式：** 系统**不**显示关键路径，需要学生自行判断。
*   **资源管理：**
    *   采用**项目总资源池**模型（例如，项目任何一天最多可用100工人和5台起重机）。
    *   当资源需求超限时，系统在甘特图上**高亮告警**，**由学生手动拖动工序**来延迟，以解决冲突。
*   **成本模型：**
    *   **总直接费用** = Σ (所有工序的当前直接费用)
    *   **总间接费用** = 总工期 × `indirect_cost_per_day`
    *   **项目总费用** = 总直接费用 + 总间接费用

### 3.3. 用户交互与界面 (UI/UX)
*   **核心视图：**
    *   **网络图视图：** 展示工序间的逻辑依赖关系。
    *   **甘特图视图：** 展示工序的时间排布、并行情况和资源冲突。
*   **主仪表盘 (Dashboard):** 界面醒目位置实时显示以下核心指标：
    1.  **总工期**
    2.  **总直接费用**
    3.  **总间接费用**
    4.  **项目总费用**
*   **工序压缩操作：**
    *   采用**输入框**模式。当点击一个可压缩工序时，弹窗显示其详细信息，并提供输入框让学生直接输入目标工期（需在正常与应急工期之间）。
    *   **练习模式下**，弹窗内会辅助计算并显示该工序的**直接费用率**。
    *   **挑战模式下**，**隐藏**直接费用率，需要学生自行计算。
*   **安全网功能：**
    *   **必须提供“撤销 (Undo)”功能**，允许学生回退操作。
    *   **必须提供“重置 (Reset)”按钮**，一键将项目恢复到初始加载状态。

## 4. 考核与激励机制 (Gamification)

*   **多赛道提交系统：** 学生可以为三个不同的优化目标提交方案：
    1.  **总成本最小**
    2.  **总工期最短**
    3.  **二者的加权和最小** (权重系数由教师设定)
*   **实时排行榜：**
    *   系统为每个赛道维护一个独立的排行榜。
    *   学生提交方案后，若成绩优于该赛道的**固定阈值“上榜线”**，则更新排行榜。
    *   排行榜公开显示学生的【姓名】和【成绩】，以鼓励良性竞争。
*   **最终成果交付：**
    *   提供**“导出当前方案”**功能。
    *   导出的内容应为一份简洁的总结，包含：最终核心指标、与初始方案的对比、被压缩的工序列表详情、以及甘特图快照。

## 5. 技术规格与要求

*   **前端：** Web应用，无需安装。
*   **后端：**
    *   需具备简单的数据库功能。
    *   **功能1：学生管理** - 能够导入并管理教师提供的CSV格式学生名单（姓名+学号）。
    *   **功能2：用户认证** - 根据名单验证学生登录。
    *   **功能3：数据存储** - 存储每个学生在三个赛道上的最佳提交成绩。
    *   **功能4：API服务** - 向前端提供排行榜数据。
*   **数据流：**
    *   初始项目`.json`文件**内置于程序中**，登录成功后由系统自动下发，保证公平性。
*   **会话管理：**
    *   **无会话保持**。关闭或刷新浏览器意味着进度丢失，学生需重新登录并从初始状态开始，以简化开发。

---